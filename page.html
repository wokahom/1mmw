<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Avatar Creator</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background: #f5f5f5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            width: 95%;
            max-width: 480px;
            background: #fff;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 0 25px rgba(0,0,0,0.1);
        }

        h2 { text-align: center; margin-bottom: 15px; }

        .preview-wrapper {
            width: 100%;
            aspect-ratio: 1/1;
            position: relative;
            border-radius: 20px;
            overflow: hidden;
            background: #ddd;
        }

        .template-bg {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            object-fit: cover;
        }

        .avatar-circle {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -60%);
            width: 55%;
            aspect-ratio: 1/1;
            border-radius: 50%;
            overflow: hidden;
            box-shadow: 0 4px 25px rgba(0,0,0,0.35);
            background: #fff;
        }

        .avatar-circle img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            cursor: grab;
        }

        .name-display {
            position: absolute;
            bottom: 8%;
            width: 100%;
            text-align: center;
            font-size: 1.25rem;
            font-weight: bold;
            color: #fff;
            text-shadow: 0 2px 5px rgba(0,0,0,0.4);
        }

        input, select {
            width: 100%;
            padding: 10px;
            border-radius: 10px;
            border: 1px solid #ccc;
            margin-top: 10px;
        }

        button {
            width: 100%;
            padding: 12px;
            margin-top: 15px;
            border: none;
            border-radius: 10px;
            background: #0078ff;
            color: white;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
        }

        button:hover { background: #0065d6; }
    </style>
</head>
<body>
    <div class="container">
        <h2>Create Your Avatar</h2>

        <div class="preview-wrapper" id="previewArea">
            <img id="templateBg" class="template-bg" src="assets/images/template_transparent_1.png" />
            <div class="avatar-circle">
                <img id="avatarImg" src="" />
            </div>
            <div id="nameText" class="name-display">Your Name</div>
        </div>

        <label>Select Template</label>
        <select id="templateSelect">
            <option value="templates/template1.jpg">Template 1</option>
            <option value="templates/template2.jpg">Template 2</option>
            <option value="templates/template3.jpg">Template 3</option>
        </select>

        <label>Upload Image</label>
        <input type="file" accept="image/*" id="imageInput" />

        <label>Enter Name</label>
        <input type="text" id="nameInput" placeholder="Type your name..." />

        <button id="downloadBtn">Download Avatar</button>
    </div>

<script>
// Update template
const templateSelect = document.getElementById('templateSelect');
templateSelect.addEventListener('change', () => {
    document.getElementById('templateBg').src = templateSelect.value;
});

// Live name update
const nameInput = document.getElementById('nameInput');
nameInput.addEventListener('input', () => {
    document.getElementById('nameText').textContent = nameInput.value || "Your Name";
});

// Upload image preview + drag movement
const imageInput = document.getElementById('imageInput');
const avatarImg = document.getElementById('avatarImg');
let isDragging = false, startX, startY, imgX = 0, imgY = 0;

imageInput.addEventListener('change', (e) => {
    const file = e.target.files[0];
    if (file) {
        avatarImg.src = URL.createObjectURL(file);
    }
});

avatarImg.addEventListener('mousedown', (e) => {
    isDragging = true;
    startX = e.clientX;
    startY = e.clientY;
    avatarImg.style.cursor = "grabbing";
});

document.addEventListener('mouseup', () => {
    isDragging = false;
    avatarImg.style.cursor = "grab";
});

document.addEventListener('mousemove', (e) => {
    if (!isDragging) return;
    const dx = e.clientX - startX;
    const dy = e.clientY - startY;
    avatarImg.style.transform = `translate(${imgX + dx}px, ${imgY + dy}px)`;
});
</script>
</body>
</html>
